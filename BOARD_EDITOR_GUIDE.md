# 小棋盘编辑器使用指南

## 📖 概述

小棋盘编辑器是一个可视化工具，用于设计8×8的小棋盘。每个小棋盘有正反两面（Face A / Face B），可以包含墙壁、终点和分光镜。

## 🚀 启动编辑器

打开 `v2/board-editor.html` 即可使用。

## 🎨 界面布局

### 左侧面板：编辑工具
- **基本信息**：设置棋盘ID（0-7）和颜色
- **当前面**：切换正面A或反面B
- **编辑模式**：选择墙壁/终点/分光镜/擦除工具
- **工具选项**：根据选择的工具显示不同选项

### 中间区域：8×8棋盘
- 点击格子应用当前工具
- 左上角(0,0)是缺口区域（粉色标识）
- 每个格子右下角显示坐标

### 右侧面板：数据导出
- 实时统计信息
- JSON数据预览
- 导出/复制/清空功能

## 🛠️ 工具使用

### 1. 🧱 墙壁工具

**步骤：**
1. 选择"墙壁"工具
2. 勾选墙壁方向（上/下/左/右，可多选）
3. 点击格子添加墙壁

**示例：**
```
选择"上"和"右" → 点击格子(3,4) → 该格子上边和右边出现墙壁
```

**注意：**
- 可以为一个格子添加多个方向的墙壁
- 再次点击同一方向按钮可以取消选择

### 2. 🎯 终点工具

**步骤：**
1. 选择"终点"工具
2. 选择形状：圆形⭕、三角🔺、方形⬛、六角⬢
3. 选择颜色：红/黄/蓝/绿/彩虹（5色）
4. 点击格子放置终点

**示例：**
```
圆形 + 红色 → 点击格子(5,3) → 显示红色圆形终点
彩虹色 → 任何棋子都可到达
```

**注意：**
- **不能在(0,0)缺口放置终点**
- 同一位置只能有一个终点
- 再次点击会替换原有终点

### 3. 💎 分光镜工具

**步骤：**
1. 选择"分光镜"工具
2. 选择方向：
   - `\` 左上到右下（从左上或右下进入会被折射）
   - `/` 左下到右上（从左下或右上进入会被折射）
3. 选择颜色：红/黄/蓝/绿
4. 点击格子放置分光镜

**示例：**
```
\ + 黄色 → 点击格子(4,4) → 显示黄色 \ 分光镜
```

**游戏规则：**
- 同色棋子直通（不折射）
- 异色棋子被折射90度
- 棋子不能停在分光镜上

### 4. 🗑️ 擦除工具

**步骤：**
1. 选择"擦除"工具
2. 点击格子

**效果：**
- 清除该格子上的所有内容（墙壁、终点、分光镜）

## 📊 双面设计

每个小棋盘有正反两面，通过顶部标签切换：

- **正面 A**：默认面
- **反面 B**：翻面后的设计

**使用场景：**
- 游戏开始前可以选择使用哪一面
- 增加游戏的多样性

## 💾 数据导出

### 导出JSON文件
点击"导出JSON"按钮，会下载一个 `board-{id}.json` 文件。

### 复制到剪贴板
点击"复制到剪贴板"，JSON数据将复制到系统剪贴板。

### JSON格式示例
```json
{
  "id": 0,
  "color": "red",
  "originalGap": { "x": 0, "y": 0 },
  "faces": [
    {
      "id": 0,
      "name": "Face A",
      "walls": [
        { "x": 3, "y": 2, "sides": ["top", "right"] }
      ],
      "prisms": [
        { "x": 4, "y": 4, "direction": "\\", "color": "yellow" }
      ],
      "targets": [
        { "x": 6, "y": 3, "shape": "circle", "color": "red", "id": "B0F0T1" }
      ]
    },
    {
      "id": 1,
      "name": "Face B",
      "walls": [],
      "prisms": [],
      "targets": []
    }
  ]
}
```

## 📝 设计建议

### 1. 墙壁设计
- 外围边界不需要手动添加墙壁（会自动生成）
- 内部墙壁用于创造路径阻碍
- 注意(0,0)缺口的右边和下边不应有墙壁

### 2. 终点设计
- 每面建议2-4个终点
- 混合使用不同形状和颜色
- 彩虹色终点可以作为"通用"终点

### 3. 分光镜设计
- 分光镜是高级机制，增加路径复杂度
- 建议每面0-2个分光镜
- 搭配墙壁设计更有趣的路径

### 4. 颜色搭配
- 8个小棋盘应该使用不同的颜色（红/黄/蓝/绿各2个）
- 这样游戏时可以保证4个不同颜色的小棋盘组合

## 🎯 完整流程示例

假设我们要创建一个ID为0、红色的小棋盘：

### Step 1: 基本设置
1. 设置棋盘ID为0
2. 设置颜色为红色
3. 确保在"正面A"标签

### Step 2: 添加墙壁
1. 选择"墙壁"工具
2. 勾选"下"方向
3. 点击格子(3,2) → 在(3,2)下方添加墙壁
4. 勾选"右"方向
5. 点击格子(2,3) → 在(2,3)右边添加墙壁

### Step 3: 添加分光镜
1. 选择"分光镜"工具
2. 选择"\" 方向
3. 选择"黄色"
4. 点击格子(4,4) → 放置黄色\分光镜

### Step 4: 添加终点
1. 选择"终点"工具
2. 选择"圆形"
3. 选择"红色"
4. 点击格子(6,6) → 放置红色圆形终点
5. 选择"三角"
6. 选择"蓝色"
7. 点击格子(2,5) → 放置蓝色三角终点

### Step 5: 设计反面
1. 点击"反面B"标签
2. 重复以上步骤设计不同的布局

### Step 6: 导出数据
1. 点击"导出JSON"
2. 保存为 `board-0.json`
3. 将文件放到 `v2/data/` 目录

## 🔧 高级技巧

### 快速复制设计
1. 复制JSON数据
2. 在JSON中修改部分数值
3. 导入到另一个棋盘ID

### 对称设计
- 使用相同坐标的镜像位置创建对称布局
- 例如：(2,3) 的镜像是 (5,4) 在7-x, 7-y

### 测试你的设计
1. 保存JSON到 `v2/data/board-X.json`
2. 在主游戏中加载测试
3. 确保路径可达且有趣

## ⚠️ 注意事项

1. **(0,0)是缺口**：不要在此放置终点或分光镜
2. **墙壁不冲突**：同一位置可以有多个方向的墙壁
3. **覆盖规则**：同一位置的终点/分光镜会被新放置的覆盖
4. **ID唯一性**：确保8个小棋盘的ID从0-7不重复
5. **颜色分配**：4种颜色每种2个棋盘（用于组合）

## 🎨 推荐配置

### 简单棋盘（适合新手）
- 墙壁：3-5处
- 终点：2-3个
- 分光镜：0-1个

### 标准棋盘（平衡）
- 墙壁：5-8处
- 终点：3-4个
- 分光镜：1-2个

### 复杂棋盘（挑战）
- 墙壁：8-12处
- 终点：4-5个
- 分光镜：2-3个

---

**祝您设计出精彩的棋盘！** 🎉

